<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Order Bot - AI Market</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="favicon.png" />
</head>
<body>

<header>
    <div class="logo-wrap">
        <img src="logo.png" class="logo" alt="AI Market logo" />
        <div class="logo-text">
            <span class="site-name">AI Market</span>
            <span class="tagline">Worlds Smart AI Platform</span>
        </div>
    </div>
    <div class="header-right">
        <nav>
            <a href="index.html">Home</a>
            <a href="ai-tools.html">AI Tools</a>
            <a href="ai-video-tools.html">Video Tools</a>
            <a href="ai-image-tools.html">Image Tools</a>
            <a href="ai-music-tools.html">Music Tools</a>
            <a href="pricing.html">Pricing</a>
            <a href="estimator.html">Estimator</a>
            <a class="active" href="order.html">Order</a>
            <a href="donate.html">Donate</a>
            <a href="portfolio.html">Portfolio</a>
            <a href="blog.html">Blog</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <a href="faq.html">FAQ</a>
        </nav>
        <div class="header-actions">
            <button class="theme-toggle" id="themeToggle"></button>
        </div>
    </div>
</header>

<section class="page">
    <h1 class="section-title">Chat Order (Beta)</h1>
    <p class="section-subtitle">
        Answer a few quick questions like a chat. At the end well open WhatsApp with all details filled in.
    </p>

    <div class="card" style="max-width:600px;margin:20px auto;">
        <div id="chatWindow" style="
            max-height:320px;
            overflow-y:auto;
            padding:10px;
            border-radius:10px;
            background:#020617;
            border:1px solid #1e293b;
            margin-bottom:10px;
            font-size:14px;
            display:flex;
            flex-direction:column;">
        </div>

        <input id="chatInput" type="text" placeholder="Type your answer and press Enter"
            style="width:100%;padding:10px;border-radius:8px;border:1px solid #334155;
                   background:#0f172a;color:#e5e7eb;">

        <button id="chatSend" class="btn-primary" style="width:100%;margin-top:8px;">
            Send
        </button>

        <button id="openWhatsApp" class="btn-secondary"
            style="width:100%;margin-top:10px;display:none;">
            Open WhatsApp with Order
        </button>
    </div>

    <p style="text-align:center;font-size:13px;opacity:0.8;">
        Prefer a normal form? Use the <a href="order.html">Order page</a>.
    </p>
</section>

<a href="https://wa.me/919676142165" class="whatsapp-float" target="_blank"></a>

<footer>
    漏 2025 AI Market 路 Worlds Smart AI Platform <br>
    <a href="terms.html">Terms</a> 路
    <a href="privacy.html">Privacy</a> 路
    <a href="refund.html">Refund Policy</a> 路
    <a href="disclaimer.html">Disclaimer</a> 路
    <a href="cookies.html">Cookies</a> 路
    <a href="faq.html">FAQ</a>
</footer>

<script>
(function () {
    const body = document.body;
    const toggle = document.getElementById("themeToggle");
    const saved = localStorage.getItem("theme");
    if (saved === "light") {
        body.classList.add("light-theme");
        toggle.textContent = "";
    }
    toggle.addEventListener("click", () => {
        body.classList.toggle("light-theme");
        const light = body.classList.contains("light-theme");
        toggle.textContent = light ? "" : "";
        localStorage.setItem("theme", light ? "light" : "dark");
    });
})();

// Simple chat bot
(function () {
    const chat = document.getElementById("chatWindow");
    const input = document.getElementById("chatInput");
    const sendBtn = document.getElementById("chatSend");
    const waBtn = document.getElementById("openWhatsApp");

    const state = {
        step: 0,
        name: "",
        service: "",
        duration: "",
        language: "",
        notes: ""
    };

    const questions = [
        "Hi! Im the AI Market bot . What is your name?",
        "Nice to meet you, {name}! What service do you need? (Example: reel, cartoon video, BGM, etc.)",
        "Approximate video length? (Example: 15 sec, 30 sec, 1 minute or say 'not video')",
        "Preferred language(s) for text/audio?",
        "Any extra details? (logo, photos, urgent delivery, budget etc.)",
        "Great! Click the button below to open WhatsApp and send all details to AI Market."
    ];

    function addMessage(text, from) {
        const div = document.createElement("div");
        div.style.margin = "6px 0";
        div.style.maxWidth = "90%";
        div.style.padding = "8px 10px";
        div.style.borderRadius = "10px";
        div.style.whiteSpace = "pre-wrap";
        if (from === "bot") {
            div.style.background = "#111827";
            div.style.alignSelf = "flex-start";
        } else {
            div.style.background = "#1d4ed8";
            div.style.alignSelf = "flex-end";
        }
        div.textContent = text;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }

    function nextQuestion() {
        let q = questions[state.step];
        if (!q) return;
        if (state.step === 1) {
            q = q.replace("{name}", state.name || "friend");
        }
        addMessage(q, "bot");
    }

    function handleAnswer(ans) {
        ans = ans.trim();
        if (!ans) return;

        addMessage(ans, "user");

        if (state.step === 0) state.name = ans;
        if (state.step === 1) state.service = ans;
        if (state.step === 2) state.duration = ans;
        if (state.step === 3) state.language = ans;
        if (state.step === 4) state.notes = ans;

        state.step++;

        if (state.step === questions.length - 1) {
            nextQuestion();
            waBtn.style.display = "inline-block";
        } else if (state.step < questions.length - 1) {
            nextQuestion();
        }
    }

    sendBtn.addEventListener("click", () => {
        const ans = input.value;
        input.value = "";
        handleAnswer(ans);
    });

    input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            e.preventDefault();
            sendBtn.click();
        }
    });

    waBtn.addEventListener("click", () => {
        let msg = "New AI order from Chat Bot:%0A%0A";
        if (state.name) msg += "Name: " + encodeURIComponent(state.name) + "%0A";
        if (state.service) msg += "Service: " + encodeURIComponent(state.service) + "%0A";
        if (state.duration) msg += "Length: " + encodeURIComponent(state.duration) + "%0A";
        if (state.language) msg += "Language(s): " + encodeURIComponent(state.language) + "%0A";
        if (state.notes) msg += "%0ADetails: " + encodeURIComponent(state.notes) + "%0A";

        const ownerNumber = "919676142165";
        const url = `https://wa.me/${ownerNumber}?text=${msg}`;
        window.open(url, "_blank");
    });

    nextQuestion();
})();
</script>

</body>
</html>
